(()=>{var t,r,g,a=null,e=!1,i=!1;function p(){if(typeof window.Fuse=="undefined"){console.warn("‚ö†Ô∏è Fuse.js non disponible");return}c(),console.log("‚úÖ Recherche initialis\xE9e (lazy mode)")}function c(){[{input:document.getElementById("search-input"),results:document.getElementById("search-results-input"),type:"desktop"},{input:document.getElementById("search-mobile-input"),results:document.getElementById("search-results-mobile-input"),type:"mobile"}].forEach(({input:e,results:t,type:n})=>{if(!e||!t){console.warn(`‚ö†Ô∏è \xC9l\xE9ments manquants pour ${n}`);return}f(e,t,n)})}function f(t,n,s){let c=null,o=-1;t.addEventListener("focus",async()=>{await l()}),t.addEventListener("input",async t=>{let s=t.target.value.trim();s.length>=2&&await l(),e?p(s):s&&u(n)});async function l(){if(!e&&!i){i=!0,console.log("üîÑ Chargement de l'index de recherche...");try{let t=await m();t.length>0&&(h(t),e=!0,console.log(`‚úÖ Index charg\xE9: ${t.length} recettes`))}catch(e){console.error("‚ùå Erreur chargement lazy:",e)}finally{i=!1}}}function d(e){if(e.key!=="Enter")return;if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),s==="mobile")return e.target.blur(),!1;if(!t.value.trim())return!1;let i=n.querySelectorAll(".search__result");if(o>=0&&i[o]){let e=i[o].querySelector("a");if(e)return window.location.href=e.href,!1}if(i.length>0){let e=i[0].querySelector("a");if(e)return window.location.href=e.href,!1}return!1}t.addEventListener("keydown",d,!0),t.addEventListener("keypress",d,!0);function p(t){if(clearTimeout(c),!t.trim()){r([]);return}if(!e){u(n);return}c=setTimeout(()=>{let e=a.search(t);r(e)},200)}function u(e){e.innerHTML=`
      <div class="search__result">
        <div class="search__loading" style="padding: 1rem; text-align: center; color: var(--gray-500);">
          ‚è≥ Chargement de la recherche...
        </div>
      </div>
    `,e.classList.remove("hidden")}function r(e){n.innerHTML="";let s=e.length>0;if(n.classList.toggle("hidden",!s),t.setAttribute("aria-expanded",s),!s){o=-1;return}e.forEach((e,t)=>{let s=document.createElement("div");s.className="search__result",s.setAttribute("role","option"),s.setAttribute("aria-selected",t===o);let i=e.item.title;s.innerHTML=`
        <a href="${e.item.url}" class="search__result-link">
          <div class="search__result-title">${i}</div>
          ${e.item.categories&&e.item.categories.length>0?`
            <div class="search__result-category">
              ${Array.isArray(e.item.categories)?e.item.categories.join(", "):e.item.categories}
            </div>
          `:""}
        </a>
      `,n.appendChild(s)})}t.addEventListener("keydown",e=>{if(e.key==="Enter")return;let s=n.querySelectorAll(".search__result");if(s.length)switch(e.key){case"ArrowDown":e.preventDefault(),o=(o+1)%s.length,f(s);break;case"ArrowUp":e.preventDefault(),o=o<=0?s.length-1:o-1,f(s);break;case"Escape":e.preventDefault(),t.value="",r([]),t.blur();break}});function f(e){e.forEach((e,t)=>{let n=t===o;e.setAttribute("aria-selected",n),n?(e.style.backgroundColor="var(--color-bg-alt)",e.style.borderLeft="3px solid var(--primary)",e.style.paddingLeft="calc(var(--space-5) - 3px)"):(e.style.backgroundColor="",e.style.borderLeft="",e.style.paddingLeft="")}),e[o]&&e[o].scrollIntoView({block:"nearest",behavior:"smooth"})}t.addEventListener("focus",()=>{n.children.length>0&&(n.classList.remove("hidden"),t.setAttribute("aria-expanded","true"))}),t.addEventListener("blur",()=>{setTimeout(()=>{n.classList.add("hidden"),t.setAttribute("aria-expanded","false"),o=-1},200)})}async function m(){try{let e=await fetch("/index.json");if(!e.ok)throw new Error("Index non trouv\xE9");return await e.json()}catch(e){return console.error("Erreur fetch:",e),[]}}function h(e){let t={keys:["title"],threshold:.3,includeMatches:!1,minMatchCharLength:2,ignoreLocation:!0,useExtendedSearch:!1,shouldSort:!1};a=new window.Fuse(e,t),console.log(`üîç Fuse configur\xE9 avec ${e.length} recettes`)}function l(){let e=document.getElementById("contact-form"),t=document.getElementById("form-status");!e||!t||(e.noValidate=!0,e.addEventListener("submit",async n=>{if(n.preventDefault(),!e.checkValidity()){t.textContent="Merci de remplir tous les champs requis !",e.reportValidity();return}let s=e.querySelector('[type="submit"]');s==null||s.setAttribute("disabled",!0),t.textContent="Envoi en cours‚Ä¶";try{let n=await fetch(e.action,{method:e.method,body:new FormData(e),headers:{Accept:"application/json"}});if(n.ok)t.textContent="Merci ! Ton message a bien \xE9t\xE9 envoy\xE9.",e.reset();else{let{error:e}=await n.json().catch(()=>({}));t.textContent=e??"Oups ! Une erreur est survenue."}}catch{t.textContent="Impossible d‚Äôenvoyer le message. V\xE9rifie ta connexion."}finally{s==null||s.removeAttribute("disabled")}}))}function o(){let e=document.body.dataset.randomRecipes;if(e)try{let t=JSON.parse(e);if(!t||t.length===0){console.warn("Aucune recette disponible pour la redirection al\xE9atoire");return}let n=t[Math.floor(Math.random()*t.length)];window.location.replace(n)}catch(e){console.error("Erreur lors de la redirection al\xE9atoire:",e),window.location.href="/random/"}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o();function d(){if(console.log("Sticky Nav JavaScript charg\xE9"),!document.getElementById("stickyNav")){console.log("Sticky nav NOT found");return}console.log("Sticky nav trouv\xE9");let n=["ingredients","steps","faq"];function t(){let e="ingredients";for(let t of n){let s=document.getElementById(t);s&&s.getBoundingClientRect().top<=120&&(e=t)}document.querySelectorAll("#stickyNav .navLink").forEach(t=>{t.dataset.target===e?(t.classList.add("text-red-500"),t.classList.remove("text-gray-600")):(t.classList.add("text-gray-600"),t.classList.remove("text-red-500"))})}document.addEventListener("scroll",()=>requestAnimationFrame(t)),t();let e=document.getElementById("navPinBtn"),o=document.getElementById("navPinIcon");if(!e){console.log("Pin button NOT found");return}console.log("Pin button trouv\xE9");function s(){var e;console.log("Opening Pinterest to pin to user account");let t=encodeURIComponent(window.location.href),n=encodeURIComponent(document.title),s=((e=document.querySelector('meta[property="og:image"]'))==null?0[0]:e.content)||"",o=encodeURIComponent(s),i=`https://pinterest.com/pin/create/button/?url=${t}&description=${n}&media=${o}`;window.open(i,"_blank","width=600,height=400")}e.addEventListener("click",function(e){e.preventDefault(),console.log("Pin button clicked - opening Pinterest"),s()}),e.classList.add("text-red-500")}function u(){console.log("JavaScript CTA charg\xE9");let o=document.getElementById("pinterestPinButton");o?(console.log("Pinterest button trouv\xE9"),o.addEventListener("click",function(e){var t;e.preventDefault(),console.log("Pinterest clicked");let n=encodeURIComponent(window.location.href),s=encodeURIComponent(document.title),o=((t=document.querySelector('meta[property="og:image"]'))==null?0[0]:t.content)||"",i=encodeURIComponent(o),a=`https://pinterest.com/pin/create/button/?url=${n}&description=${s}&media=${i}`;window.open(a,"_blank","width=600,height=400")})):console.log("Pinterest button NOT found");let t=document.getElementById("shareButton"),e=document.getElementById("shareMenu");t&&e?(console.log("Share button et menu trouv\xE9s"),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),console.log("Share button clicked"),e.classList.toggle("opacity-0"),e.classList.toggle("invisible")}),document.addEventListener("click",function(n){!t.contains(n.target)&&!e.contains(n.target)&&(e.classList.add("opacity-0"),e.classList.add("invisible"))})):console.log("Share button ou menu NOT found");let i=document.getElementById("emailButton");i&&(console.log("Email button trouv\xE9"),i.addEventListener("click",function(t){t.preventDefault(),console.log("Email clicked");let n=encodeURIComponent(document.title),s=encodeURIComponent(`D\xE9couvrez cette recette : ${window.location.href}`);window.location.href=`mailto:?subject=${n}&body=${s}`,e&&(e.classList.add("opacity-0"),e.classList.add("invisible"))}));let a=document.getElementById("whatsappButton");a&&(console.log("WhatsApp button trouv\xE9"),a.addEventListener("click",function(t){t.preventDefault(),console.log("WhatsApp clicked");let n=encodeURIComponent(`${document.title} - ${window.location.href}`);window.open(`https://wa.me/?text=${n}`,"_blank"),e&&(e.classList.add("opacity-0"),e.classList.add("invisible"))}));let r=document.getElementById("pinterestButton");r&&(console.log("Pinterest menu button trouv\xE9"),r.addEventListener("click",function(t){var n;t.preventDefault(),console.log("Pinterest menu clicked");let s=encodeURIComponent(window.location.href),o=encodeURIComponent(document.title),i=((n=document.querySelector('meta[property="og:image"]'))==null?0[0]:n.content)||"",a=encodeURIComponent(i),r=`https://pinterest.com/pin/create/button/?url=${s}&description=${o}&media=${a}`;window.open(r,"_blank","width=600,height=400"),e&&(e.classList.add("opacity-0"),e.classList.add("invisible"))}));let c=document.getElementById("instagramButton");c&&(console.log("Instagram button trouv\xE9"),c.addEventListener("click",function(t){t.preventDefault(),console.log("Instagram clicked"),navigator.clipboard?navigator.clipboard.writeText(window.location.href).then(()=>{s("Lien copi\xE9 pour Instagram !")}).catch(()=>{n("Lien copi\xE9 pour Instagram !")}):n("Lien copi\xE9 pour Instagram !"),e&&(e.classList.add("opacity-0"),e.classList.add("invisible"))}));let l=document.getElementById("copyLinkButton");l&&(console.log("Copy link button trouv\xE9"),l.addEventListener("click",function(t){t.preventDefault(),console.log("Copy link clicked"),navigator.clipboard?navigator.clipboard.writeText(window.location.href).then(()=>{s("Lien copi\xE9 !")}).catch(()=>{n("Lien copi\xE9 !")}):n("Lien copi\xE9 !"),e&&(e.classList.add("opacity-0"),e.classList.add("invisible"))}));let d=document.getElementById("printButton");d&&(console.log("Print button trouv\xE9"),d.addEventListener("click",function(e){e.preventDefault(),console.log("Print clicked"),window.print()}))}function s(e){console.log("Toast:",e),document.querySelectorAll(".toast-notification").forEach(e=>e.remove());let t=document.createElement("div");t.className="toast-notification fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300",t.style.opacity="0",t.style.transform="translateX(100%)",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="1",t.style.transform="translateX(0)"},10),setTimeout(()=>{t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>t.remove(),300)},3e3)}function n(e="Lien copi\xE9 !"){console.log("Fallback copy");let t=document.createElement("input");t.value=window.location.href,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();try{document.execCommand("copy"),s(e)}catch(e){console.error("Erreur copie:",e),s("Erreur lors de la copie")}document.body.removeChild(t)}r=class{constructor(){this.modules=new Map,this.initialized=!1}async init(){if(!this.initialized)try{await this.domReady(),this.initCoreModules(),this.initPageModules(),this.initGlobalFeatures(),this.initialized=!0,console.log("‚úÖ Application initialis\xE9e")}catch(e){console.error("‚ùå Erreur d'initialisation:",e),this.handleError(e)}}domReady(){return new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()})}initCoreModules(){this.initMobileMenu(),this.initSearchModule(),this.initSmoothScroll()}initPageModules(){let{pathname:e}=window.location;document.body.dataset.randomRecipes&&this.modules.set("randomHome",o()),e.includes("/recipes/")&&document.getElementById("stickyNav")&&this.modules.set("stickyNav",d()),document.getElementById("contact-form")&&this.modules.set("contactForm",l()),document.querySelector(".cta-buttons-container")&&this.modules.set("ctaButtons",u())}initGlobalFeatures(){this.initLazyLoading(),this.initServiceWorker(),this.initScrollToTop(),this.initFilterReset()}initMobileMenu(){let i=document.getElementById("mobile-menu-toggle"),a=document.getElementById("mobile-menu"),r=document.getElementById("mobile-search-toggle"),e=document.getElementById("mobile-search"),s=document.getElementById("menu-icon"),o=document.getElementById("close-icon");if(!i||!a)return;let t=!1,n=!1,c=()=>{t&&(t=!1,this.toggleMenu(a,!1),s&&o&&(s.classList.remove("hidden"),o.classList.add("hidden")),i.setAttribute("aria-expanded",!1)),n&&e&&(n=!1,this.toggleMenu(e,!1))};window.addEventListener("pageshow",e=>{(e.persisted||performance.navigation&&performance.navigation.type===performance.navigation.TYPE_BACK_FORWARD)&&c()}),window.addEventListener("popstate",()=>{c()}),a.addEventListener("click",e=>{e.target.tagName==="A"&&c()}),e&&e.addEventListener("click",e=>{(e.target.tagName==="A"||e.target.closest("a"))&&c()}),i.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),t=!t,this.toggleMenu(a,t),s&&o&&(s.classList.toggle("hidden",t),o.classList.toggle("hidden",!t)),i.setAttribute("aria-expanded",t),n&&e&&(n=!1,this.toggleMenu(e,!1))}),r&&e&&r.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),n=!n,this.toggleMenu(e,n),t&&(t=!1,this.toggleMenu(a,!1),s&&o&&(s.classList.remove("hidden"),o.classList.add("hidden")),i.setAttribute("aria-expanded",!1)),n){let t=e.querySelector("input");t&&setTimeout(()=>t.focus(),100)}}),document.addEventListener("click",c=>{!a.contains(c.target)&&!i.contains(c.target)&&t&&(t=!1,this.toggleMenu(a,!1),s&&o&&(s.classList.remove("hidden"),o.classList.add("hidden")),i.setAttribute("aria-expanded",!1)),e&&!e.contains(c.target)&&!r.contains(c.target)&&n&&(n=!1,this.toggleMenu(e,!1))}),document.addEventListener("keydown",c=>{c.key==="Escape"&&(t&&(t=!1,this.toggleMenu(a,!1),s&&o&&(s.classList.remove("hidden"),o.classList.add("hidden")),i.setAttribute("aria-expanded",!1),i.focus()),n&&e&&(n=!1,this.toggleMenu(e,!1),r&&r.focus()))})}toggleMenu(e,t){t?(e.classList.remove("hidden"),requestAnimationFrame(()=>{e.classList.add("animate-slide-in-down")})):(e.classList.add("hidden"),e.classList.remove("animate-slide-in-down"))}initSearchModule(){if(typeof window.Fuse=="undefined"){setTimeout(()=>this.initSearchModule(),500);return}p()}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{let n=e.getAttribute("href");if(n==="#")return;let s=document.querySelector(n);s&&(t.preventDefault(),s.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,null,n))})})}initLazyLoading(){if("IntersectionObserver"in window){let e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let n=e.target;n.src=n.dataset.src||n.src,n.classList.add("fade-in"),t.unobserve(n)}})});document.querySelectorAll('img[loading="lazy"]').forEach(t=>{e.observe(t)})}}initServiceWorker(){"serviceWorker"in navigator&&location.protocol==="https:"&&navigator.serviceWorker.register("/sw.js").then(e=>{console.log("‚úÖ Service Worker enregistr\xE9:",e.scope)}).catch(e=>{console.error("‚ùå Erreur Service Worker:",e)})}initScrollToTop(){let e=document.getElementById("scrollToTop");if(!e)return;e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});let t=()=>{window.pageYOffset>300?(e.style.opacity="1",e.style.visibility="visible"):(e.style.opacity="0",e.style.visibility="hidden")};e.style.opacity="0",e.style.visibility="hidden",e.style.transition="opacity 0.3s ease, visibility 0.3s ease",window.addEventListener("scroll",t)}initFilterReset(){let e=document.getElementById("filter-reset");e&&e.addEventListener("click",()=>{let e=document.getElementById("filter-category"),t=document.getElementById("filter-tag"),n=document.getElementById("filter-time"),s=document.querySelector(".search-input");e&&(e.selectedIndex=0),t&&(t.selectedIndex=0),n&&(n.value=""),s&&(s.value=""),typeof window.filterRecipes=="function"&&window.filterRecipes(),document.dispatchEvent(new CustomEvent("filtersReset"))})}handleError(e){console.error("Erreur application:",e),e.critical&&this.showNotification("Une erreur est survenue. Veuillez rafra\xEEchir la page.","error")}showNotification(e,t="info"){let n=document.createElement("div");n.className=`notification notification-${t}`,n.textContent=e,Object.assign(n.style,{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"6px",backgroundColor:t==="error"?"#ef4444":"#10b981",color:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:"9999",transform:"translateX(400px)",transition:"transform 0.3s ease"}),document.body.appendChild(n),requestAnimationFrame(()=>{n.style.transform="translateX(0)"}),setTimeout(()=>{n.style.transform="translateX(400px)",setTimeout(()=>n.remove(),300)},3e3)}},t=new r,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>t.init()):t.init(),g=t})()