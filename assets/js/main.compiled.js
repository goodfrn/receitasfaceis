(()=>{function S(){if(typeof window.Fuse=="undefined"){console.warn("\u26A0\uFE0F Fuse.js non disponible");return}T().then(r=>R(r)).catch(r=>{console.error("\u274C Erreur chargement index:",r)})}async function T(){try{let r=await fetch("/index.json");if(!r.ok)throw new Error("Index non trouv\xE9");return await r.json()}catch(r){return console.error("Erreur fetch:",r),[]}}function R(r){let e={keys:["title","tags","categories"],threshold:.3,includeMatches:!0,minMatchCharLength:2},t=new window.Fuse(r,e);[{input:document.getElementById("search-input"),clear:document.getElementById("search-clear-input"),results:document.getElementById("search-results-input"),type:"desktop"},{input:document.getElementById("search-mobile-input"),clear:document.getElementById("search-clear-mobile-input"),results:document.getElementById("search-results-mobile-input"),type:"mobile"}].forEach(({input:n,clear:s,results:d,type:l})=>{if(!n||!d){console.warn(`\u26A0\uFE0F \xC9l\xE9ments manquants pour ${l}`);return}let m=null,o=-1;function c(a){if(a.key!=="Enter")return;if(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),l==="mobile")return a.target.blur(),!1;if(!n.value.trim())return!1;let u=d.querySelectorAll(".search-result-item");if(o>=0&&u[o]){let f=u[o].querySelector("a");if(f)return window.location.href=f.href,!1}if(u.length>0){let f=u[0].querySelector("a");if(f)return window.location.href=f.href,!1}return!1}n.addEventListener("keydown",c,!0),n.addEventListener("keypress",c,!0);function p(a){d.innerHTML="";let u=a.length>0;if(d.classList.toggle("hidden",!u),n.setAttribute("aria-expanded",u),!u){o=-1;return}a.forEach((f,g)=>{let h=document.createElement("li");h.className="search-result-item",h.setAttribute("role","option"),h.setAttribute("aria-selected",g===o);let k=v(f.item.title,f.matches);h.innerHTML=`
          <a href="${f.item.url}" class="block">
            <div class="search-result-title">${k}</div>
            ${f.item.categories?`
              <div class="search-result-category">
                ${f.item.categories.join(", ")}
              </div>
            `:""}
            ${f.item.excerpt?`
              <div class="search-result-excerpt">${f.item.excerpt}</div>
            `:""}
          </a>
        `,d.appendChild(h)})}function v(a,u){if(!u||!u.length)return a;let f=a;return u.forEach(g=>{g.key==="title"&&g.indices.forEach(([h,k])=>{let B=a.substring(h,k+1);f=f.replace(B,`<mark style="background-color: #EA580C; color: white; padding: 1px 3px; border-radius: 3px;">${B}</mark>`)})}),f}function b(a){if(clearTimeout(m),!a.trim()){p([]),s&&s.classList.add("hidden");return}s&&s.classList.remove("hidden"),m=setTimeout(()=>{let u=t.search(a);p(u)},300)}n.addEventListener("input",a=>{b(a.target.value)}),s&&s.addEventListener("click",()=>{n.value="",p([]),s.classList.add("hidden"),n.focus()}),n.addEventListener("keydown",a=>{if(a.key==="Enter")return;let u=d.querySelectorAll(".search-result-item");if(u.length)switch(a.key){case"ArrowDown":a.preventDefault(),o=(o+1)%u.length,y(u);break;case"ArrowUp":a.preventDefault(),o=o<=0?u.length-1:o-1,y(u);break;case"Escape":a.preventDefault(),n.value="",p([]),s&&s.classList.add("hidden"),n.blur();break}});function y(a){a.forEach((u,f)=>{let g=f===o;u.setAttribute("aria-selected",g),g?(u.style.backgroundColor="var(--color-bg-alt)",u.style.borderLeft="3px solid var(--primary)",u.style.paddingLeft="calc(var(--space-5) - 3px)"):(u.style.backgroundColor="",u.style.borderLeft="",u.style.paddingLeft="")}),a[o]&&a[o].scrollIntoView({block:"nearest",behavior:"smooth"})}n.addEventListener("focus",()=>{d.children.length>0&&(d.classList.remove("hidden"),n.setAttribute("aria-expanded","true"))}),n.addEventListener("blur",()=>{setTimeout(()=>{d.classList.add("hidden"),n.setAttribute("aria-expanded","false"),o=-1},200)})}),console.log("\u2705 Recherche initialis\xE9e avec",r.length,"recettes")}function C(){let r=document.getElementById("contact-form"),e=document.getElementById("form-status");!r||!e||(r.noValidate=!0,r.addEventListener("submit",async t=>{if(t.preventDefault(),!r.checkValidity()){e.textContent="Merci de remplir tous les champs requis !",r.reportValidity();return}let i=r.querySelector('[type="submit"]');i==null||i.setAttribute("disabled",!0),e.textContent="Envoi en cours\u2026";try{let n=await fetch(r.action,{method:r.method,body:new FormData(r),headers:{Accept:"application/json"}});if(n.ok)e.textContent="Merci ! Ton message a bien \xE9t\xE9 envoy\xE9.",r.reset();else{let{error:s}=await n.json().catch(()=>({}));e.textContent=s!=null?s:"Oups ! Une erreur est survenue."}}catch(n){e.textContent="Impossible d\u2019envoyer le message. V\xE9rifie ta connexion."}finally{i==null||i.removeAttribute("disabled")}}))}function w(){let r=document.body.dataset.randomRecipes;if(r)try{let e=JSON.parse(r);if(!e||e.length===0){console.warn("Aucune recette disponible pour la redirection al\xE9atoire");return}let t=e[Math.floor(Math.random()*e.length)];window.location.replace(t)}catch(e){console.error("Erreur lors de la redirection al\xE9atoire:",e),window.location.href="/random/"}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w();function A(){if(console.log("Sticky Nav JavaScript charg\xE9"),!document.getElementById("stickyNav")){console.log("Sticky nav NOT found");return}console.log("Sticky nav trouv\xE9");let e=["ingredients","steps","faq"];function t(){let d="ingredients";for(let l of e){let m=document.getElementById(l);m&&m.getBoundingClientRect().top<=120&&(d=l)}document.querySelectorAll("#stickyNav .navLink").forEach(l=>{l.dataset.target===d?(l.classList.add("text-red-500"),l.classList.remove("text-gray-600")):(l.classList.add("text-gray-600"),l.classList.remove("text-red-500"))})}document.addEventListener("scroll",()=>requestAnimationFrame(t)),t();let i=document.getElementById("navPinBtn"),n=document.getElementById("navPinIcon");if(!i){console.log("Pin button NOT found");return}console.log("Pin button trouv\xE9");function s(){var p;console.log("Opening Pinterest to pin to user account");let d=encodeURIComponent(window.location.href),l=encodeURIComponent(document.title),m=((p=document.querySelector('meta[property="og:image"]'))==null?void 0:p.content)||"",o=encodeURIComponent(m),c=`https://pinterest.com/pin/create/button/?url=${d}&description=${l}&media=${o}`;window.open(c,"_blank","width=600,height=400")}i.addEventListener("click",function(d){d.preventDefault(),console.log("Pin button clicked - opening Pinterest"),s()}),i.classList.add("text-red-500")}function M(){console.log("JavaScript CTA charg\xE9");let r=document.getElementById("pinterestPinButton");r?(console.log("Pinterest button trouv\xE9"),r.addEventListener("click",function(o){var a;o.preventDefault(),console.log("Pinterest clicked");let c=encodeURIComponent(window.location.href),p=encodeURIComponent(document.title),v=((a=document.querySelector('meta[property="og:image"]'))==null?void 0:a.content)||"",b=encodeURIComponent(v),y=`https://pinterest.com/pin/create/button/?url=${c}&description=${p}&media=${b}`;window.open(y,"_blank","width=600,height=400")})):console.log("Pinterest button NOT found");let e=document.getElementById("shareButton"),t=document.getElementById("shareMenu");e&&t?(console.log("Share button et menu trouv\xE9s"),e.addEventListener("click",function(o){o.preventDefault(),o.stopPropagation(),console.log("Share button clicked"),t.classList.toggle("opacity-0"),t.classList.toggle("invisible")}),document.addEventListener("click",function(o){!e.contains(o.target)&&!t.contains(o.target)&&(t.classList.add("opacity-0"),t.classList.add("invisible"))})):console.log("Share button ou menu NOT found");let i=document.getElementById("emailButton");i&&(console.log("Email button trouv\xE9"),i.addEventListener("click",function(o){o.preventDefault(),console.log("Email clicked");let c=encodeURIComponent(document.title),p=encodeURIComponent(`D\xE9couvrez cette recette : ${window.location.href}`);window.location.href=`mailto:?subject=${c}&body=${p}`,t&&(t.classList.add("opacity-0"),t.classList.add("invisible"))}));let n=document.getElementById("whatsappButton");n&&(console.log("WhatsApp button trouv\xE9"),n.addEventListener("click",function(o){o.preventDefault(),console.log("WhatsApp clicked");let c=encodeURIComponent(`${document.title} - ${window.location.href}`);window.open(`https://wa.me/?text=${c}`,"_blank"),t&&(t.classList.add("opacity-0"),t.classList.add("invisible"))}));let s=document.getElementById("pinterestButton");s&&(console.log("Pinterest menu button trouv\xE9"),s.addEventListener("click",function(o){var a;o.preventDefault(),console.log("Pinterest menu clicked");let c=encodeURIComponent(window.location.href),p=encodeURIComponent(document.title),v=((a=document.querySelector('meta[property="og:image"]'))==null?void 0:a.content)||"",b=encodeURIComponent(v),y=`https://pinterest.com/pin/create/button/?url=${c}&description=${p}&media=${b}`;window.open(y,"_blank","width=600,height=400"),t&&(t.classList.add("opacity-0"),t.classList.add("invisible"))}));let d=document.getElementById("instagramButton");d&&(console.log("Instagram button trouv\xE9"),d.addEventListener("click",function(o){o.preventDefault(),console.log("Instagram clicked"),navigator.clipboard?navigator.clipboard.writeText(window.location.href).then(()=>{L("Lien copi\xE9 pour Instagram !")}).catch(()=>{E("Lien copi\xE9 pour Instagram !")}):E("Lien copi\xE9 pour Instagram !"),t&&(t.classList.add("opacity-0"),t.classList.add("invisible"))}));let l=document.getElementById("copyLinkButton");l&&(console.log("Copy link button trouv\xE9"),l.addEventListener("click",function(o){o.preventDefault(),console.log("Copy link clicked"),navigator.clipboard?navigator.clipboard.writeText(window.location.href).then(()=>{L("Lien copi\xE9 !")}).catch(()=>{E("Lien copi\xE9 !")}):E("Lien copi\xE9 !"),t&&(t.classList.add("opacity-0"),t.classList.add("invisible"))}));let m=document.getElementById("printButton");m&&(console.log("Print button trouv\xE9"),m.addEventListener("click",function(o){o.preventDefault(),console.log("Print clicked"),window.print()}))}function L(r){console.log("Toast:",r),document.querySelectorAll(".toast-notification").forEach(i=>i.remove());let t=document.createElement("div");t.className="toast-notification fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300",t.style.opacity="0",t.style.transform="translateX(100%)",t.textContent=r,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="1",t.style.transform="translateX(0)"},10),setTimeout(()=>{t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>t.remove(),300)},3e3)}function E(r="Lien copi\xE9 !"){console.log("Fallback copy");let e=document.createElement("input");e.value=window.location.href,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),L(r)}catch(t){console.error("Erreur copie:",t),L("Erreur lors de la copie")}document.body.removeChild(e)}var I=class{constructor(){this.modules=new Map,this.initialized=!1}async init(){if(!this.initialized)try{await this.domReady(),this.initCoreModules(),this.initPageModules(),this.initGlobalFeatures(),this.initialized=!0,console.log("\u2705 Application initialis\xE9e")}catch(e){console.error("\u274C Erreur d'initialisation:",e),this.handleError(e)}}domReady(){return new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()})}initCoreModules(){this.initMobileMenu(),this.initSearchModule(),this.initSmoothScroll()}initPageModules(){let{pathname:e}=window.location;document.body.dataset.randomRecipes&&this.modules.set("randomHome",w()),e.includes("/recipes/")&&document.getElementById("stickyNav")&&this.modules.set("stickyNav",A()),document.getElementById("contact-form")&&this.modules.set("contactForm",C()),document.querySelector(".cta-buttons-container")&&this.modules.set("ctaButtons",M())}initGlobalFeatures(){this.initLazyLoading(),this.initServiceWorker(),this.initScrollToTop(),this.initFilterReset()}initMobileMenu(){let e=document.getElementById("mobile-menu-toggle"),t=document.getElementById("mobile-menu"),i=document.getElementById("mobile-search-toggle"),n=document.getElementById("mobile-search"),s=document.getElementById("menu-icon"),d=document.getElementById("close-icon");if(!e||!t)return;let l=!1,m=!1,o=()=>{l&&(l=!1,this.toggleMenu(t,!1),s&&d&&(s.classList.remove("hidden"),d.classList.add("hidden")),e.setAttribute("aria-expanded",!1)),m&&n&&(m=!1,this.toggleMenu(n,!1))};window.addEventListener("pageshow",c=>{(c.persisted||performance.navigation&&performance.navigation.type===performance.navigation.TYPE_BACK_FORWARD)&&o()}),window.addEventListener("popstate",()=>{o()}),t.addEventListener("click",c=>{c.target.tagName==="A"&&o()}),n&&n.addEventListener("click",c=>{(c.target.tagName==="A"||c.target.closest("a"))&&o()}),e.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),l=!l,this.toggleMenu(t,l),s&&d&&(s.classList.toggle("hidden",l),d.classList.toggle("hidden",!l)),e.setAttribute("aria-expanded",l),m&&n&&(m=!1,this.toggleMenu(n,!1))}),i&&n&&i.addEventListener("click",c=>{if(c.preventDefault(),c.stopPropagation(),m=!m,this.toggleMenu(n,m),l&&(l=!1,this.toggleMenu(t,!1),s&&d&&(s.classList.remove("hidden"),d.classList.add("hidden")),e.setAttribute("aria-expanded",!1)),m){let p=n.querySelector("input");p&&setTimeout(()=>p.focus(),100)}}),document.addEventListener("click",c=>{!t.contains(c.target)&&!e.contains(c.target)&&l&&(l=!1,this.toggleMenu(t,!1),s&&d&&(s.classList.remove("hidden"),d.classList.add("hidden")),e.setAttribute("aria-expanded",!1)),n&&!n.contains(c.target)&&!i.contains(c.target)&&m&&(m=!1,this.toggleMenu(n,!1))}),document.addEventListener("keydown",c=>{c.key==="Escape"&&(l&&(l=!1,this.toggleMenu(t,!1),s&&d&&(s.classList.remove("hidden"),d.classList.add("hidden")),e.setAttribute("aria-expanded",!1),e.focus()),m&&n&&(m=!1,this.toggleMenu(n,!1),i&&i.focus()))})}toggleMenu(e,t){t?(e.classList.remove("hidden"),requestAnimationFrame(()=>{e.classList.add("animate-slide-in-down")})):(e.classList.add("hidden"),e.classList.remove("animate-slide-in-down"))}initSearchModule(){if(typeof window.Fuse=="undefined"){setTimeout(()=>this.initSearchModule(),500);return}S()}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{let i=e.getAttribute("href");if(i==="#")return;let n=document.querySelector(i);n&&(t.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,null,i))})})}initLazyLoading(){if("IntersectionObserver"in window){let e=new IntersectionObserver((t,i)=>{t.forEach(n=>{if(n.isIntersecting){let s=n.target;s.src=s.dataset.src||s.src,s.classList.add("fade-in"),i.unobserve(s)}})});document.querySelectorAll('img[loading="lazy"]').forEach(t=>{e.observe(t)})}}initServiceWorker(){"serviceWorker"in navigator&&location.protocol==="https:"&&navigator.serviceWorker.register("/sw.js").then(e=>{console.log("\u2705 Service Worker enregistr\xE9:",e.scope)}).catch(e=>{console.error("\u274C Erreur Service Worker:",e)})}initScrollToTop(){let e=document.getElementById("scrollToTop");if(!e)return;e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});let t=()=>{window.pageYOffset>300?(e.style.opacity="1",e.style.visibility="visible"):(e.style.opacity="0",e.style.visibility="hidden")};e.style.opacity="0",e.style.visibility="hidden",e.style.transition="opacity 0.3s ease, visibility 0.3s ease",window.addEventListener("scroll",t)}initFilterReset(){let e=document.getElementById("filter-reset");e&&e.addEventListener("click",()=>{let t=document.getElementById("filter-category"),i=document.getElementById("filter-tag"),n=document.getElementById("filter-time"),s=document.querySelector(".search-input");t&&(t.selectedIndex=0),i&&(i.selectedIndex=0),n&&(n.value=""),s&&(s.value=""),typeof window.filterRecipes=="function"&&window.filterRecipes(),document.dispatchEvent(new CustomEvent("filtersReset"))})}handleError(e){console.error("Erreur application:",e),e.critical&&this.showNotification("Une erreur est survenue. Veuillez rafra\xEEchir la page.","error")}showNotification(e,t="info"){let i=document.createElement("div");i.className=`notification notification-${t}`,i.textContent=e,Object.assign(i.style,{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"6px",backgroundColor:t==="error"?"#ef4444":"#10b981",color:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:"9999",transform:"translateX(400px)",transition:"transform 0.3s ease"}),document.body.appendChild(i),requestAnimationFrame(()=>{i.style.transform="translateX(0)"}),setTimeout(()=>{i.style.transform="translateX(400px)",setTimeout(()=>i.remove(),300)},3e3)}},x=new I;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>x.init()):x.init();var W=x;})();
